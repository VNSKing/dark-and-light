{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [
    "cc",
    "Class",
    "extends",
    "Component",
    "properties",
    "_leftBlock",
    "_rightBlock",
    "_upBlock",
    "_downBlock",
    "_moveAble",
    "onLoad",
    "manager",
    "director",
    "getCollisionManager",
    "enabled",
    "node",
    "on",
    "onTouchMove",
    "e",
    "diff",
    "getDelta",
    "x",
    "y",
    "position",
    "pAdd",
    "onCollisionEnter",
    "other",
    "self",
    "group",
    "parent",
    "selfAabb",
    "world",
    "aabb",
    "otherAabb",
    "selfPreAabb",
    "preAabb",
    "otherPreAabb",
    "localBlockArray",
    "xMin",
    "xMax",
    "push",
    "Math",
    "abs",
    "yMax",
    "yMin",
    "blockArray",
    "undefined",
    "uuid",
    "onCollisionExit",
    "item"
  ],
  "mappings": "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",
  "file": "unknown",
  "sourcesContent": [
    "cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n\r\n        _leftBlock: 0,\r\n        _rightBlock: 0,\r\n        _upBlock: 0,\r\n        _downBlock: 0,\r\n        _moveAble: true,\r\n    },\r\n\r\n    onLoad: function () {\r\n        let manager = cc.director.getCollisionManager();\r\n        manager.enabled = true;\r\n        this.node.on('touchmove',this.onTouchMove,this)\r\n    },\r\n\r\n    onTouchMove: function(e){\r\n        if(!this._moveAble){return;}\r\n        let diff = e.getDelta();\r\n        if(this._leftBlock && diff.x < 0){diff.x = 0}\r\n        if(this._rightBlock && diff.x > 0){diff.x = 0}\r\n        if(this._upBlock && diff.y > 0){diff.y = 0}\r\n        if(this._downBlock && diff.y < 0){diff.y = 0}\r\n        this.node.position = cc.pAdd(this.node.position,diff);\r\n    },\r\n\r\n    onCollisionEnter: function(other,self){\r\n        if(other.node.group == 'player-render' || other.node.group == 'player' || other.node.parent == this.node){return;}\r\n        let selfAabb = self.world.aabb;\r\n        let otherAabb = other.world.aabb;\r\n        let selfPreAabb = self.world.preAabb;\r\n        let otherPreAabb = other.world.preAabb;\r\n\r\n        let localBlockArray = [];\r\n\r\n        if(selfPreAabb.xMin >= otherPreAabb.xMax && selfAabb.xMin <= otherAabb.xMax){\r\n            //left block\r\n            this._leftBlock++;\r\n            localBlockArray.push('_leftBlock');\r\n            this.node.x += Math.abs(selfAabb.xMin - otherAabb.xMax);\r\n        }\r\n        if(selfPreAabb.xMax <= otherPreAabb.xMin && selfAabb.xMax >= otherAabb.xMin){\r\n            //right block\r\n            this._rightBlock++;\r\n            localBlockArray.push('_rightBlock');\r\n            this.node.x -= Math.abs(selfAabb.xMax - otherAabb.xMin);\r\n        }\r\n        if(selfPreAabb.yMax <= otherPreAabb.yMin && selfAabb.yMax >= otherAabb.yMin){\r\n            //up block\r\n            this._upBlock++;\r\n            localBlockArray.push('_upBlock');\r\n            this.node.y -= Math.abs(selfAabb.yMax - otherAabb.yMin);\r\n        }\r\n        if(selfPreAabb.yMin >= otherPreAabb.yMax && selfAabb.yMin <= otherAabb.yMax){\r\n            //down block\r\n            this._downBlock++;\r\n            localBlockArray.push('_downBlock');\r\n            this.node.x += Math.abs(selfAabb.yMin - otherAabb.yMax);\r\n        }\r\n        if(other.blockArray == undefined){\r\n            other.blockArray = [];\r\n        }\r\n        other.blockArray[self.node.uuid] = localBlockArray;\r\n        \r\n    },\r\n\r\n    onCollisionExit: function(other,self){\r\n        if(other.blockArray != undefined && other.blockArray[self.node.uuid] != undefined){\r\n            for(let item of other.blockArray[self.node.uuid]){\r\n                this[item]--;\r\n            }\r\n            delete other.blockArray[self.node.uuid];\r\n        }\r\n    }\r\n\r\n});\r\n"
  ]
}